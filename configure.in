AC_INIT(src/bmud.h)
AM_CONFIG_HEADER(conf.h)
AM_INIT_AUTOMAKE(bmud, 0.6)

AC_PROG_CC
AC_PROG_INSTALL

ALL_LINGUAS="en_US"
AM_GNU_GETTEXT([external])

AC_DEFINE_UNQUOTED(LOCALEDIR, "$prefix/share/locale", [Where the locale files are])

dnl AM_PATH_GTK(1.2.0,
dnl 	[
dnl 		CFLAGS="$CFLAGS $GTK_CFLAGS"
dnl 		LIBS="$LIBS $GTK_LIBS"
dnl 	]
dnl 	,AC_MSG_ERROR(Cannot find GTK: Is gtk-config in path?))
dnl 
dnl AC_ARG_WITH(gnome-includes,
dnl 	[  --with-gnome-includes   Specify location of GNOME headers],[
dnl 	CFLAGS="$CFLAGS -I$withval"
dnl 	])
dnl AC_ARG_WITH(gnome-libs,
dnl 	[  --with-gnome-libs       Specify location of GNOME libs],[
dnl 	LDFLAGS="$LDFLAGS -L$withval"
dnl 	gnome_prefix=$withval
dnl 	])
dnl 
dnl AC_ARG_ENABLE(gnome,
dnl [  --enable-gnome          Use GNOME [default=yes]], use_gnome=no, use_gnome=yes)
dnl if test "x$use_gnome" = xyes; then
dnl 	AC_PATH_PROG(GNOME_CONFIG,gnome-config)
dnl 	AC_MSG_CHECKING(for GNOME)
dnl 	if $GNOME_CONFIG --libs-only-l gnome >/dev/null 2>&1; then
dnl 		AC_DEFINE(USE_GNOME,,[Use GNOME Framework])
dnl 		GNOME_CFLAGS=`gnome-config --cflags gnomeui`
dnl 		GNOME_LIBS=`gnome-config --libs gnomeui`
dnl 		CFLAGS="$CFLAGS $GNOME_CFLAGS"
dnl 		LIBS="$LIBS $GNOME_LIBS"
dnl 		AC_MSG_RESULT(yes)
dnl 	else
dnl 		AC_MSG_RESULT(no)
dnl 	fi
dnl else
dnl 		AC_MSG_RESULT(no)
dnl fi
dnl 
dnl AC_ARG_ENABLE(zvt-term,
dnl [  --enable-zvt-term       Use ZVT to display the main window [default=no]],
dnl 	zvt=yes , zvt=no)
dnl if test x$zvt = xyes; then
dnl 	AC_MSG_CHECKING(for ZVT)
dnl 	AC_DEFINE(USE_ZVT,,[ZVT for rendering])
dnl 	LIBS="$LIBS $ZVT_LIBS"
dnl 	AC_MSG_RESULT(yes)
dnl fi

AC_DEFINE(USE_GNOME,,[Use GNOME Framework])
CFLAGS="$CFLAGS `pkg-config --cflags libgnomeui-2.0`"
LIBS="$LIBS `pkg-config --libs libgnomeui-2.0`"

AC_ARG_ENABLE(guile,
[  --enable-guile          Use GNU Guile for scripting [default=yes]],
	, guile=yes)
if test x$guile = xyes; then
	AC_MSG_CHECKING(for Guile)

	AC_DEFINE(USE_GUILE,,[Guile for scripting])
	GUILE_CFLAGS=`guile-config compile`
	GUILE_LIBS=`guile-config link`
	CFLAGS="$CFLAGS $GUILE_CFLAGS"
	LIBS="$LIBS $GUILE_LIBS"
	AC_MSG_RESULT(yes)
fi

AC_ARG_ENABLE(perl,
[  --enable-perl           Use PERL for scripting [default=yes]],
	, perl=yes)
if test x$perl = xyes; then
	AC_MSG_CHECKING(for PERL)
	AC_DEFINE(USE_PERL,,[perl for scripting])
	PERL_CFLAGS=`perl -MExtUtils::Embed -e ccopts`
	PERL_LIBS=`perl -MExtUtils::Embed -e ldopts`
	CFLAGS="$CFLAGS $PERL_CFLAGS"
	LIBS="$LIBS $PERL_LIBS"
	AC_MSG_RESULT(yes)
fi

AC_OUTPUT([ m4/Makefile 
Makefile 
data/Makefile
po/Makefile.in
src/Makefile
],[])
