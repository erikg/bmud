AC_INIT(src/bmud.h)
AM_INIT_AUTOMAKE(bmud, 0.6)

AC_PROG_CC
AC_PROG_INSTALL

ALL_LINGUAS="en_US"
AM_GNU_GETTEXT

AC_DEFINE_UNQUOTED(LOCALEDIR, "$prefix/share/locale")

AM_PATH_GTK(1.2.0,
	[
		CFLAGS="$CFLAGS $GTK_CFLAGS"
		LIBS="$LIBS $GTK_LIBS"
	]
	,AC_MSG_ERROR(Cannot find GTK: Is gtk-config in path?))

GNOME_INIT_HOOK(
	[
		AC_DEFINE(USE_GNOME)
		CFLAGS="$CFLAGS $GNOME_INCLUDEDIR"
		LIBS="$LIBS $GNOME_LIBDIR $GNOMEUI_LIBS"
	])

AC_ARG_ENABLE(zvt-term,
[  --enable-zvt-term       Use ZVT to display the main window [default=no]],
	zvt=yes , zvt=no)
if test x$zvt = xyes; then
	AC_MSG_CHECKING(for ZVT)
	AC_DEFINE(USE_ZVT)
	LIBS="$LIBS $ZVT_LIBS"
	AC_MSG_RESULT(yes)
fi

AC_ARG_ENABLE(guile,
[  --enable-guile          Use GNU Guile for scripting [default=yes]],
	, guile=yes)
if test x$guile = xyes; then
	AC_MSG_CHECKING(for Guile)

	AC_DEFINE(USE_GUILE)
	GUILE_CFLAGS=`guile-config compile`
	GUILE_LIBS=`guile-config link`
	CFLAGS="$CFLAGS $GUILE_CFLAGS"
	LIBS="$LIBS $GUILE_LIBS"
	AC_MSG_RESULT(yes)
fi

AC_ARG_ENABLE(perl,
[  --enable-perl           Use PERL for scripting [default=yes]],
	, perl=yes)
if test x$perl = xyes; then
	AC_MSG_CHECKING(for PERL)
	AC_DEFINE(USE_PERL)
	PERL_CFLAGS=`perl -MExtUtils::Embed -e ccopts`
	PERL_LIBS=`perl -MExtUtils::Embed -e ldopts`
	CFLAGS="$CFLAGS $PERL_CFLAGS"
	LIBS="$LIBS $PERL_LIBS"
	AC_MSG_RESULT(yes)
fi

AC_OUTPUT([
Makefile 
data/Makefile
po/Makefile.in
intl/Makefile
src/Makefile
],[sed -e "/POTFILES =/r po/POTFILES" po/Makefile.in > po/Makefile])
